{"version":3,"sources":["../../src/database/ghost.js"],"names":["module","exports","knex","h","createTableIfNotExists","table","increments","string","text","timestamp","defaultTo","fn","now","then","integer","references","unique"],"mappings":";;AAIA;;;;;;AAEAA,OAAOC,OAAP,GAAiBC,QAAQ;AACvB,QAAMC,IAAI,uBAAQD,IAAR,CAAV;AACA,SAAOC,EACJC,sBADI,CACmB,eADnB,EACoCC,SAAS;AAChDA,UAAMC,UAAN,CAAiB,IAAjB;AACAD,UAAME,MAAN,CAAa,QAAb;AACAF,UAAME,MAAN,CAAa,MAAb;AACAF,UAAMG,IAAN,CAAW,SAAX;AACAH,UAAMI,SAAN,CAAgB,aAAhB,EAA+BC,SAA/B,CAAyCR,KAAKS,EAAL,CAAQC,GAAR,EAAzC;AACD,GAPI,EAQJC,IARI,CAQC,MACJV,EAAEC,sBAAF,CAAyB,iBAAzB,EAA4CC,SAAS;AACnDA,UAAMC,UAAN,CAAiB,IAAjB;AACAD,UAAMS,OAAN,CAAc,YAAd,EAA4BC,UAA5B,CAAuC,kBAAvC;AACAV,UAAME,MAAN,CAAa,UAAb;AACAF,UAAMI,SAAN,CAAgB,YAAhB,EAA8BC,SAA9B,CAAwCR,KAAKS,EAAL,CAAQC,GAAR,EAAxC;AACAP,UAAME,MAAN,CAAa,YAAb;AACAF,UAAMW,MAAN,CAAa,CAAC,QAAD,EAAW,MAAX,CAAb;AACD,GAPD,CATG,CAAP;AAkBD,CApBD,C,CANA","file":"ghost.js","sourcesContent":["/*\n  Tables storing ghost content and its revisions\n*/\n\nimport helpers from './helpers'\n\nmodule.exports = knex => {\n  const h = helpers(knex)\n  return h\n    .createTableIfNotExists('ghost_content', table => {\n      table.increments('id')\n      table.string('folder')\n      table.string('file')\n      table.text('content')\n      table.timestamp('modified_on').defaultTo(knex.fn.now())\n    })\n    .then(() =>\n      h.createTableIfNotExists('ghost_revisions', table => {\n        table.increments('id')\n        table.integer('content_id').references('ghost_content.id')\n        table.string('revision')\n        table.timestamp('created_on').defaultTo(knex.fn.now())\n        table.string('created_by')\n        table.unique(['folder', 'file'])\n      })\n    )\n}\n"]}