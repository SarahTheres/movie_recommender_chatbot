{"version":3,"sources":["../../src/renderers/builtin_action-button.js"],"names":["data","action","Error","on","template_type","elements","title","buttons","map","a","type","payload","url","typing","text","attachments","contentType","content","value","subtitle","actions","name","options","reply_markup","JSON","stringify","inline_keyboard","d","callback_data","substring"],"mappings":"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","file":"builtin_action-button.js","sourcesContent":["export default data => {\n  if (data.action === 'Pick location') {\n    throw new Error('Action-button renderers do not support \"Pick location\" type at the moment')\n  }\n\n  return [\n    {\n      on: 'facebook',\n      template_type: 'generic',\n      elements: [\n        {\n          title: data.title,\n          buttons: [data].map(a => {\n            if (a.action === 'Say something') {\n              return {\n                type: 'postback',\n                title: a.title,\n                payload: a.title\n              }\n            } else if (a.action === 'Open URL') {\n              return {\n                type: 'web_url',\n                title: a.title,\n                url: a.url\n              }\n            }\n          })\n        }\n      ],\n\n      typing: data.typing\n    },\n    {\n      on: 'webchat',\n      type: 'carousel',\n      text: ' ',\n      elements: [\n        {\n          title: data.title,\n          buttons: [data].map(a => {\n            if (a.action === 'Open URL') {\n              return {\n                title: a.title,\n                url: a.url\n              }\n            } else {\n              return {\n                title: '<Unsupported action>'\n              }\n            }\n          })\n        }\n      ],\n      typing: data.typing\n    },\n    {\n      on: 'microsoft',\n      attachments: [\n        {\n          contentType: 'application/vnd.microsoft.card.hero',\n          content: {\n            title: data.title,\n            buttons: [data].map(a => {\n              if (a.action === 'Say something') {\n                return {\n                  type: 'imBack',\n                  title: a.title,\n                  value: a.title\n                }\n              } else if (a.action === 'Open URL') {\n                return {\n                  type: 'openUrl',\n                  title: a.title,\n                  value: a.url\n                }\n              }\n            })\n          }\n        }\n      ]\n    },\n    {\n      on: 'slack',\n      attachments: [\n        {\n          title: data.title,\n          text: data.subtitle,\n          actions: [data].map(a => {\n            if (a.action === 'Say something') {\n              return {\n                name: 'press',\n                text: a.title,\n                type: 'button',\n                value: a.title\n              }\n            } else if (a.action === 'Open URL') {\n              return {\n                type: 'button',\n                text: a.title,\n                url: a.url\n              }\n            }\n          })\n        }\n      ]\n    },\n    {\n      on: 'telegram',\n      title: data.title,\n      options: {\n        reply_markup: JSON.stringify({\n          inline_keyboard: [data].map(d => {\n            if (d.action === 'Say something') {\n              return [\n                {\n                  text: d.title,\n                  callback_data: d.title.substring(0, 64) // 1-64 bytes\n                }\n              ]\n            } else if (d.action === 'Open URL') {\n              return [\n                {\n                  text: d.title,\n                  url: d.url\n                }\n              ]\n            }\n          })\n        })\n      }\n    }\n  ]\n}\n"]}